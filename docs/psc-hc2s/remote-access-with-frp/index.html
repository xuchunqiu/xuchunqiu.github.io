<!doctype html><html lang><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><meta http-equiv=x-ua-compatible content="IE=edge, chrome=1"><title>如何使用 frp 安全访问实验室深度学习工作站 - CQCQ 收到未？</title><meta name=Description content="欢迎来到我的菜园子"><meta property="og:title" content="如何使用 frp 安全访问实验室深度学习工作站"><meta property="og:description" content="简介 之前使用的公共节点 Zerotier 在学校之外的打洞成功率很差，因此换用 frp 。两者工作原理类似——依赖具有公网 IP 的中心节点中转。frp 的中心节点只能自建但相应的稳定性更优。
frp 基于认证的 stcp(secret tcp) 模式可以将内网服务安全地暴露到公网。frp 的可执行文件包括服务端（frps）与客户端（frpc），前者运行在具有公网 IP 的节点，后者运行在公网无法直接访问的、提供/使用服务的节点。.ini 后缀的文件记录了 frp节点间（不单是 frpc 与 frps，还包括 frpc 之间）的连接信息。
我们在阿里云上租用的 VPS 运行着 frps（连接不同 frpc 的桥梁），当前工作站上运行着 frpc（提供服务），而各位同学要在自己的电脑上同样运行 frpc（使用服务）。
快速上手 为了跑起来一个使用服务的 frpc，各位同学只需下载对应自己操作系统的 frpc，并使用正确的 *.ini 文件。
  从 发布页面 下载 frpc。建议与 VPS 上运行的 frps 保持一致的版本（0.37.1）以减少出现问题的可能性。
  解压压缩包并精简。frp 没有安装的概念，但下载到的压缩包是个大杂烩，可以按照下图删掉浅蓝色标注的文件/文件夹。
  下载基本的 *.ini 文件。在解压目录中创建以下文件（覆盖原来的 frpc.ini）。这两个文件的内容未来修改的可能性非常低。
为什么需要多个配置文件？  为了便于理解和维护，frp 支持对配置文件进行拆分。
实现方式是在主 .ini 文件中使用 includes 项记录需要的 [子配置文件]^(仅语义上的定义) 的相对/绝对路径，并以半身逗号分隔。
特别要指出的是，即使指定的子配置文件不存在也不会影响 frp 运行。因此在 快速上手 部分即使我们没有 frpc."><meta property="og:type" content="article"><meta property="og:url" content="https://xuchunqiu.me/docs/psc-hc2s/remote-access-with-frp/"><meta property="og:image" content="https://xuchunqiu.me/logo.png"><meta property="article:section" content="docs"><meta property="article:published_time" content="2021-07-25T16:18:08+08:00"><meta property="article:modified_time" content="2021-07-25T16:18:08+08:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://xuchunqiu.me/logo.png"><meta name=twitter:title content="如何使用 frp 安全访问实验室深度学习工作站"><meta name=twitter:description content="简介 之前使用的公共节点 Zerotier 在学校之外的打洞成功率很差，因此换用 frp 。两者工作原理类似——依赖具有公网 IP 的中心节点中转。frp 的中心节点只能自建但相应的稳定性更优。
frp 基于认证的 stcp(secret tcp) 模式可以将内网服务安全地暴露到公网。frp 的可执行文件包括服务端（frps）与客户端（frpc），前者运行在具有公网 IP 的节点，后者运行在公网无法直接访问的、提供/使用服务的节点。.ini 后缀的文件记录了 frp节点间（不单是 frpc 与 frps，还包括 frpc 之间）的连接信息。
我们在阿里云上租用的 VPS 运行着 frps（连接不同 frpc 的桥梁），当前工作站上运行着 frpc（提供服务），而各位同学要在自己的电脑上同样运行 frpc（使用服务）。
快速上手 为了跑起来一个使用服务的 frpc，各位同学只需下载对应自己操作系统的 frpc，并使用正确的 *.ini 文件。
  从 发布页面 下载 frpc。建议与 VPS 上运行的 frps 保持一致的版本（0.37.1）以减少出现问题的可能性。
  解压压缩包并精简。frp 没有安装的概念，但下载到的压缩包是个大杂烩，可以按照下图删掉浅蓝色标注的文件/文件夹。
  下载基本的 *.ini 文件。在解压目录中创建以下文件（覆盖原来的 frpc.ini）。这两个文件的内容未来修改的可能性非常低。
为什么需要多个配置文件？  为了便于理解和维护，frp 支持对配置文件进行拆分。
实现方式是在主 .ini 文件中使用 includes 项记录需要的 [子配置文件]^(仅语义上的定义) 的相对/绝对路径，并以半身逗号分隔。
特别要指出的是，即使指定的子配置文件不存在也不会影响 frp 运行。因此在 快速上手 部分即使我们没有 frpc."><meta name=application-name content="LoveIt"><meta name=apple-mobile-web-app-title content="LoveIt"><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://xuchunqiu.me/docs/psc-hc2s/remote-access-with-frp/><link rel=next href=https://xuchunqiu.me/docs/psc-hc2s/psc-hc2s-aka-ts40-x2-hardware-specification/><link rel=stylesheet href=/lib/normalize/normalize.min.css><link rel=stylesheet href=/css/style.min.css><link rel=stylesheet href=/lib/fontawesome-free/all.min.css><link rel=stylesheet href=/lib/animate/animate.min.css><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"如何使用 frp 安全访问实验室深度学习工作站","inLanguage":"","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/xuchunqiu.me\/docs\/psc-hc2s\/remote-access-with-frp\/"},"genre":"docs","keywords":"102, 114, 112, 44, 32, 232, 191, 156, 231, 168, 139, 232, 174, 191, 233, 151, 174, 44, 32, 230, 137, 147, 230, 180, 158, 44, 32, 230, 149, 153, 231, 168, 139","wordcount":354,"url":"https:\/\/xuchunqiu.me\/docs\/psc-hc2s\/remote-access-with-frp\/","datePublished":"2021-07-25T16:18:08+08:00","dateModified":"2021-07-25T16:18:08+08:00","publisher":{"@type":"Organization","name":""},"author":{"@type":"Person","name":"xuchunqiu"},"description":""}</script></head><body header-desktop=fixed header-mobile=auto><script type=text/javascript>(window.localStorage&&localStorage.getItem("theme")?localStorage.getItem("theme")==="dark":"auto"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"auto"==="dark")&&document.body.setAttribute("theme","dark")</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title="CQCQ 收到未？"></a></div><div class=menu><div class=menu-inner><a class=menu-item href=/posts/>文章 </a><a class=menu-item href=/docs/>文档 </a><a class=menu-item href=/tags/>标签 </a><a class=menu-item href=/about/me/>关于我 </a><span class="menu-item delimiter"></span><span class="menu-item search" id=search-desktop>
<input type=text placeholder="Search titles or contents..." id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=Search><i class="fas fa-search fa-fw"></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=Clear><i class="fas fa-times-circle fa-fw"></i></a>
<span class="search-button search-loading" id=search-loading-desktop><i class="fas fa-spinner fa-fw fa-spin"></i></span>
</span><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme"><i class="fas fa-adjust fa-fw"></i></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title="CQCQ 收到未？"></a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><div class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder="Search titles or contents..." id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=Search><i class="fas fa-search fa-fw"></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=Clear><i class="fas fa-times-circle fa-fw"></i></a>
<span class="search-button search-loading" id=search-loading-mobile><i class="fas fa-spinner fa-fw fa-spin"></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>Cancel</a></div><a class=menu-item href=/posts/ title>文章</a><a class=menu-item href=/docs/ title>文档</a><a class=menu-item href=/tags/ title>标签</a><a class=menu-item href=/about/me/ title>关于我</a><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme">
<i class="fas fa-adjust fa-fw"></i></a></div></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=main><div class=container><div class="page single special"><h1 class="single-title animated pulse faster">如何使用 frp 安全访问实验室深度学习工作站</h1><div class=content id=content><h1 id=简介>简介</h1><p>之前使用的公共节点 Zerotier 在学校之外的打洞成功率很差，因此换用 <a href=https://github.com/fatedier/frp target=_blank rel="noopener noreffer">frp</a> 。两者工作原理类似——依赖具有公网 IP 的中心节点中转。frp 的中心节点只能自建但相应的稳定性更优。</p><p>frp 基于认证的 <code>stcp(secret tcp)</code> 模式可以将内网服务安全地暴露到公网。frp 的可执行文件包括服务端（frps）与客户端（frpc），前者运行在具有公网 IP 的节点，后者运行在公网无法直接访问的、提供/使用服务的节点。<code>.ini</code> 后缀的文件记录了 frp节点间（不单是 frpc 与 frps，还包括 frpc 之间）的连接信息。</p><p><img class=lazyload src=/svg/loading.min.svg data-src=https://raw.githubusercontent.com/xuchunqiu/personal-blog-resources/main/docs/PSC-HC2S/remote-access-with-frp/frp%E7%9A%84%E5%8E%9F%E7%90%86.png data-srcset="https://raw.githubusercontent.com/xuchunqiu/personal-blog-resources/main/docs/PSC-HC2S/remote-access-with-frp/frp%E7%9A%84%E5%8E%9F%E7%90%86.png, https://raw.githubusercontent.com/xuchunqiu/personal-blog-resources/main/docs/PSC-HC2S/remote-access-with-frp/frp%E7%9A%84%E5%8E%9F%E7%90%86.png 1.5x, https://raw.githubusercontent.com/xuchunqiu/personal-blog-resources/main/docs/PSC-HC2S/remote-access-with-frp/frp%E7%9A%84%E5%8E%9F%E7%90%86.png 2x" data-sizes=auto alt=https://raw.githubusercontent.com/xuchunqiu/personal-blog-resources/main/docs/PSC-HC2S/remote-access-with-frp/frp%E7%9A%84%E5%8E%9F%E7%90%86.png title="frp 的原理图示"></p><p>我们在阿里云上租用的 VPS 运行着 frps（连接不同 frpc 的桥梁），当前工作站上运行着 frpc（提供服务），而各位同学要在自己的电脑上同样运行 frpc（使用服务）。</p><h1 id=快速上手>快速上手</h1><p>为了跑起来一个使用服务的 frpc，各位同学只需下载对应自己操作系统的 frpc，并使用正确的 <code>*.ini</code> 文件。</p><ol><li><p>从 <a href=https://github.com/fatedier/frp/releases target=_blank rel="noopener noreffer">发布页面</a> 下载 frpc。建议与 VPS 上运行的 frps 保持一致的版本（0.37.1）以减少出现问题的可能性。</p><p><img class=lazyload src=/svg/loading.min.svg data-src=https://raw.githubusercontent.com/xuchunqiu/personal-blog-resources/main/docs/PSC-HC2S/remote-access-with-frp/frp%E5%8F%91%E5%B8%83%E9%A1%B5%E5%8F%8A%E4%B8%8B%E8%BD%BD%E8%AF%B4%E6%98%8E.png data-srcset="https://raw.githubusercontent.com/xuchunqiu/personal-blog-resources/main/docs/PSC-HC2S/remote-access-with-frp/frp%E5%8F%91%E5%B8%83%E9%A1%B5%E5%8F%8A%E4%B8%8B%E8%BD%BD%E8%AF%B4%E6%98%8E.png, https://raw.githubusercontent.com/xuchunqiu/personal-blog-resources/main/docs/PSC-HC2S/remote-access-with-frp/frp%E5%8F%91%E5%B8%83%E9%A1%B5%E5%8F%8A%E4%B8%8B%E8%BD%BD%E8%AF%B4%E6%98%8E.png 1.5x, https://raw.githubusercontent.com/xuchunqiu/personal-blog-resources/main/docs/PSC-HC2S/remote-access-with-frp/frp%E5%8F%91%E5%B8%83%E9%A1%B5%E5%8F%8A%E4%B8%8B%E8%BD%BD%E8%AF%B4%E6%98%8E.png 2x" data-sizes=auto alt=https://raw.githubusercontent.com/xuchunqiu/personal-blog-resources/main/docs/PSC-HC2S/remote-access-with-frp/frp%E5%8F%91%E5%B8%83%E9%A1%B5%E5%8F%8A%E4%B8%8B%E8%BD%BD%E8%AF%B4%E6%98%8E.png title=发布页截图及下载说明></p></li><li><p>解压压缩包并精简。frp 没有安装的概念，但下载到的压缩包是个大杂烩，可以按照下图删掉浅蓝色标注的文件/文件夹。</p><p><img class=lazyload src=/svg/loading.min.svg data-src=https://raw.githubusercontent.com/xuchunqiu/personal-blog-resources/main/docs/PSC-HC2S/remote-access-with-frp/frp%E5%8E%8B%E7%BC%A9%E5%8C%85%E6%96%87%E4%BB%B6%E4%BB%8B%E7%BB%8D.png data-srcset="https://raw.githubusercontent.com/xuchunqiu/personal-blog-resources/main/docs/PSC-HC2S/remote-access-with-frp/frp%E5%8E%8B%E7%BC%A9%E5%8C%85%E6%96%87%E4%BB%B6%E4%BB%8B%E7%BB%8D.png, https://raw.githubusercontent.com/xuchunqiu/personal-blog-resources/main/docs/PSC-HC2S/remote-access-with-frp/frp%E5%8E%8B%E7%BC%A9%E5%8C%85%E6%96%87%E4%BB%B6%E4%BB%8B%E7%BB%8D.png 1.5x, https://raw.githubusercontent.com/xuchunqiu/personal-blog-resources/main/docs/PSC-HC2S/remote-access-with-frp/frp%E5%8E%8B%E7%BC%A9%E5%8C%85%E6%96%87%E4%BB%B6%E4%BB%8B%E7%BB%8D.png 2x" data-sizes=auto alt=https://raw.githubusercontent.com/xuchunqiu/personal-blog-resources/main/docs/PSC-HC2S/remote-access-with-frp/frp%E5%8E%8B%E7%BC%A9%E5%8C%85%E6%96%87%E4%BB%B6%E4%BB%8B%E7%BB%8D.png title=压缩包内容介绍></p></li><li><p>下载基本的 <code>*.ini</code> 文件。在解压目录中创建以下文件（覆盖原来的 <code>frpc.ini</code>）。这两个文件的内容未来修改的可能性非常低。</p><div class="details admonition note open"><div class="details-summary admonition-title"><i class="icon fas fa-pencil-alt fa-fw"></i>为什么需要多个配置文件？<i class="details-icon fas fa-angle-right fa-fw"></i></div><div class=details-content><div class=admonition-content><p>为了便于理解和维护，frp 支持对配置文件进行拆分。</p><p>实现方式是在主 <code>.ini</code> 文件中使用 <code>includes</code> 项记录需要的 <strong><ruby>子配置文件<rt>仅语义上的定义</rt></ruby></strong> 的相对/绝对路径，并以半身逗号分隔。</p><p>特别要指出的是，即使指定的子配置文件不存在也不会影响 frp 运行。因此在 快速上手 部分即使我们没有 <code>frpc.ini</code> 中 <code>includes</code> 的 <code>frpc_personal.ini</code> 也能让 frpc 跑起来。</p></div></div></div><div class="details admonition info"><div class="details-summary admonition-title"><i class="icon fas fa-info-circle fa-fw"></i>frpc.ini<i class="details-icon fas fa-angle-right fa-fw"></i></div><div class=details-content><div class=admonition-content><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ini data-lang=ini><span class=line><span class=cl> <span class=k>[common]</span>
</span></span><span class=line><span class=cl> <span class=c1># VPS 上 frps 的连接信息</span>
</span></span><span class=line><span class=cl> <span class=na>server_addr</span> <span class=o>=</span> <span class=s>IP 地址</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl> <span class=na>server_port</span> <span class=o>=</span> <span class=s>端口号</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl> <span class=na>authentication_method</span> <span class=o>=</span> <span class=s>token</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl> <span class=na>authenticate_new_work_conns</span> <span class=o>=</span> <span class=s>true</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl> <span class=na>token</span> <span class=o>=</span> <span class=s>认证信息</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl> <span class=na>includes</span> <span class=o>=</span> <span class=s>frpc_workstation_public.ini, frpc_personal.ini   </span>
</span></span></code></pre></td></tr></table></div></div></div></div></div><div class="details admonition info"><div class="details-summary admonition-title"><i class="icon fas fa-info-circle fa-fw"></i>frpc_workstation_public.ini<i class="details-icon fas fa-angle-right fa-fw"></i></div><div class=details-content><div class=admonition-content><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ini data-lang=ini><span class=line><span class=cl> <span class=k>[AIMAX_Web]</span>
</span></span><span class=line><span class=cl> <span class=c1># 连接协议</span>
</span></span><span class=line><span class=cl> <span class=na>type</span> <span class=o>=</span> <span class=s>stcp</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl> <span class=c1># 本机 frpc 的角色是服务使用者</span>
</span></span><span class=line><span class=cl> <span class=na>role</span> <span class=o>=</span> <span class=s>visitor</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl> <span class=c1># 与工作站上 frpc 完全一致的校验信息</span>
</span></span><span class=line><span class=cl> <span class=na>server_name</span> <span class=o>=</span> <span class=s>workstation_AIMAX_Web</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl> <span class=na>sk</span> <span class=o>=</span> <span class=s>另一组认证信息</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl> <span class=c1># 本机监听地址</span>
</span></span><span class=line><span class=cl> <span class=na>bind_addr</span> <span class=o>=</span> <span class=s>127.0.0.1</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl> <span class=c1># 本机监听端口。指定访问 AIMAX 网页的端口号</span>
</span></span><span class=line><span class=cl> <span class=na>bind_port</span> <span class=o>=</span> <span class=s>8081  </span>
</span></span></code></pre></td></tr></table></div></div></div></div></div></li><li><p>运行 frpc。打开本机上的终端，进入 frp 的解压目录，或者使用 <code>Shift</code> + <code>鼠标右键</code> 的方式快速进入。</p><p><img class=lazyload src=/svg/loading.min.svg data-src=https://raw.githubusercontent.com/xuchunqiu/personal-blog-resources/main/docs/PSC-HC2S/remote-access-with-frp/%E5%BF%AB%E9%80%9F%E5%9C%A8%E6%8C%87%E5%AE%9A%E6%96%87%E4%BB%B6%E5%A4%B9%E6%89%93%E5%BC%80%E7%BB%88%E7%AB%AF.png data-srcset="https://raw.githubusercontent.com/xuchunqiu/personal-blog-resources/main/docs/PSC-HC2S/remote-access-with-frp/%E5%BF%AB%E9%80%9F%E5%9C%A8%E6%8C%87%E5%AE%9A%E6%96%87%E4%BB%B6%E5%A4%B9%E6%89%93%E5%BC%80%E7%BB%88%E7%AB%AF.png, https://raw.githubusercontent.com/xuchunqiu/personal-blog-resources/main/docs/PSC-HC2S/remote-access-with-frp/%E5%BF%AB%E9%80%9F%E5%9C%A8%E6%8C%87%E5%AE%9A%E6%96%87%E4%BB%B6%E5%A4%B9%E6%89%93%E5%BC%80%E7%BB%88%E7%AB%AF.png 1.5x, https://raw.githubusercontent.com/xuchunqiu/personal-blog-resources/main/docs/PSC-HC2S/remote-access-with-frp/%E5%BF%AB%E9%80%9F%E5%9C%A8%E6%8C%87%E5%AE%9A%E6%96%87%E4%BB%B6%E5%A4%B9%E6%89%93%E5%BC%80%E7%BB%88%E7%AB%AF.png 2x" data-sizes=auto alt=https://raw.githubusercontent.com/xuchunqiu/personal-blog-resources/main/docs/PSC-HC2S/remote-access-with-frp/%E5%BF%AB%E9%80%9F%E5%9C%A8%E6%8C%87%E5%AE%9A%E6%96%87%E4%BB%B6%E5%A4%B9%E6%89%93%E5%BC%80%E7%BB%88%E7%AB%AF.png title=快速在指定文件夹下启动终端的方法></p><p>执行以下命令即可启动 frpc。<div class="details admonition example open"><div class="details-summary admonition-title"><i class="icon fas fa-list-ol fa-fw"></i>启动 frpc（Windows）<i class="details-icon fas fa-angle-right fa-fw"></i></div><div class=details-content><div class=admonition-content><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>./frpc.exe -c ./frpc.ini
</span></span></code></pre></td></tr></table></div></div><p><code>-c</code> 参数指定 config 文件，由于 frpc 默认会使用当前工作区下的 <code>frpc.ini</code> 文件。因此可以简化为：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>./frpc
</span></span></code></pre></td></tr></table></div></div></div></div></div></p><p>接下来打开本机浏览器访问 127.0.0.1:8081 即可访问到 AIMAX 的网页了：</p><p><img class=lazyload src=/svg/loading.min.svg data-src=https://raw.githubusercontent.com/xuchunqiu/personal-blog-resources/main/docs/PSC-HC2S/remote-access-with-frp/%E7%A4%BA%E4%BE%8B-%E6%88%90%E5%8A%9F%E8%AE%BF%E9%97%AE%E8%BF%9C%E7%AB%AF%E9%A1%B5%E9%9D%A2.png data-srcset="https://raw.githubusercontent.com/xuchunqiu/personal-blog-resources/main/docs/PSC-HC2S/remote-access-with-frp/%E7%A4%BA%E4%BE%8B-%E6%88%90%E5%8A%9F%E8%AE%BF%E9%97%AE%E8%BF%9C%E7%AB%AF%E9%A1%B5%E9%9D%A2.png, https://raw.githubusercontent.com/xuchunqiu/personal-blog-resources/main/docs/PSC-HC2S/remote-access-with-frp/%E7%A4%BA%E4%BE%8B-%E6%88%90%E5%8A%9F%E8%AE%BF%E9%97%AE%E8%BF%9C%E7%AB%AF%E9%A1%B5%E9%9D%A2.png 1.5x, https://raw.githubusercontent.com/xuchunqiu/personal-blog-resources/main/docs/PSC-HC2S/remote-access-with-frp/%E7%A4%BA%E4%BE%8B-%E6%88%90%E5%8A%9F%E8%AE%BF%E9%97%AE%E8%BF%9C%E7%AB%AF%E9%A1%B5%E9%9D%A2.png 2x" data-sizes=auto alt=https://raw.githubusercontent.com/xuchunqiu/personal-blog-resources/main/docs/PSC-HC2S/remote-access-with-frp/%E7%A4%BA%E4%BE%8B-%E6%88%90%E5%8A%9F%E8%AE%BF%E9%97%AE%E8%BF%9C%E7%AB%AF%E9%A1%B5%E9%9D%A2.png title=成功访问远端页面></p><div class="details admonition tip open"><div class="details-summary admonition-title"><i class="icon fas fa-lightbulb fa-fw"></i>如何停止 frpc？<i class="details-icon fas fa-angle-right fa-fw"></i></div><div class=details-content><div class=admonition-content>如需结束 frpc，在启动 frpc 的终端窗口内使用 <code>Ctrl</code> + <code>c</code>。</div></div></div></li></ol><h1 id=配置详解>配置详解</h1><p>在步骤二成功访问到 AIMAX 网页版后，需要开始编写 <code>frpc_personal.ini</code> 配置文件。</p><h2 id=原因>原因</h2><p>因为 AIMAX 本身的一些问题，导致远程访问下所有交互式开发环境都无法进入，但像创建交互式开发、上传下载私有/共享数据等操作是没问题的。</p><p><img class=lazyload src=/svg/loading.min.svg data-src=https://raw.githubusercontent.com/xuchunqiu/personal-blog-resources/main/docs/PSC-HC2S/remote-access-with-frp/%E7%A4%BA%E4%BE%8B-%E4%B8%8D%E8%83%BD%E7%9B%B4%E6%8E%A5%E8%BF%9B%E5%85%A5%E4%BA%A4%E4%BA%92%E5%BC%8F%E5%BC%80%E5%8F%91.png data-srcset="https://raw.githubusercontent.com/xuchunqiu/personal-blog-resources/main/docs/PSC-HC2S/remote-access-with-frp/%E7%A4%BA%E4%BE%8B-%E4%B8%8D%E8%83%BD%E7%9B%B4%E6%8E%A5%E8%BF%9B%E5%85%A5%E4%BA%A4%E4%BA%92%E5%BC%8F%E5%BC%80%E5%8F%91.png, https://raw.githubusercontent.com/xuchunqiu/personal-blog-resources/main/docs/PSC-HC2S/remote-access-with-frp/%E7%A4%BA%E4%BE%8B-%E4%B8%8D%E8%83%BD%E7%9B%B4%E6%8E%A5%E8%BF%9B%E5%85%A5%E4%BA%A4%E4%BA%92%E5%BC%8F%E5%BC%80%E5%8F%91.png 1.5x, https://raw.githubusercontent.com/xuchunqiu/personal-blog-resources/main/docs/PSC-HC2S/remote-access-with-frp/%E7%A4%BA%E4%BE%8B-%E4%B8%8D%E8%83%BD%E7%9B%B4%E6%8E%A5%E8%BF%9B%E5%85%A5%E4%BA%A4%E4%BA%92%E5%BC%8F%E5%BC%80%E5%8F%91.png 2x" data-sizes=auto alt=https://raw.githubusercontent.com/xuchunqiu/personal-blog-resources/main/docs/PSC-HC2S/remote-access-with-frp/%E7%A4%BA%E4%BE%8B-%E4%B8%8D%E8%83%BD%E7%9B%B4%E6%8E%A5%E8%BF%9B%E5%85%A5%E4%BA%A4%E4%BA%92%E5%BC%8F%E5%BC%80%E5%8F%91.png title=不能直接进入交互式开发环境></p><p>暂时的解决方案是对交互式开发里需要用到的每一个端口都生成一段 frpc 的配置（约定该文件的名称为 <code>frpc_personal.ini</code> ），因此需要同学们对 <code>*.ini</code> 文件的结构有一定概念。</p><h2 id=ini-文件结构说明><code>*.ini</code> 文件结构说明</h2><p>最基本的 *.ini 文件如下：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ini data-lang=ini><span class=line><span class=cl><span class=k>[section]</span>
</span></span><span class=line><span class=cl><span class=na>name</span><span class=o>=</span><span class=s>value</span>
</span></span></code></pre></td></tr></table></div></div><ul><li>一个 section 对应一个服务，section 的名字完全不重要，写得自己能理解就好（可用中文）；</li><li>一个 <code>*.ini</code> 文件中可以有多个 section，它们之间以方括号区隔而非换行；</li><li>一个 section 下可以有多个 name,value 的对，它们之间没有先后顺序要求；</li><li>name,value 对内部可以随意使用空格，name,value 对间可以随意使用换行；</li><li>name,value 对内部大小写敏感；</li><li>行间注释以 <code>;</code> 或 <code>#</code> 开头，没有行内注释。</li></ul><h2 id=frpc_personalini-的编写><code>frpc_personal.ini</code> 的编写</h2><p>模板如下，有几个端口需要远程访问就写几个 section。section 下只有 <strong><ruby><code>service_name</code><rt>服务名</rt></ruby></strong>、<strong><ruby><code>sk</code><rt>密码</rt></ruby></strong> 强制修改，且严格与服务端配置完全对应。写好后保存为 <code>frpc_personal.ini</code> 放入解压缩文件夹中，再次启动 <code>frpc</code>。</p><div class="details admonition tip open"><div class="details-summary admonition-title"><i class="icon fas fa-lightbulb fa-fw"></i>需要远程访问的端口号填到哪里？<i class="details-icon fas fa-angle-right fa-fw"></i></div><div class=details-content><div class=admonition-content>section 对应服务的远端端口号只在 frps 的配置文件中体现。</div></div></div><div class="details admonition info open"><div class="details-summary admonition-title"><i class="icon fas fa-info-circle fa-fw"></i>frpc_personal.ini<i class="details-icon fas fa-angle-right fa-fw"></i></div><div class=details-content><div class=admonition-content><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ini data-lang=ini><span class=line><span class=cl><span class=k>[service1]</span>
</span></span><span class=line><span class=cl><span class=c1># 固定不变</span>
</span></span><span class=line><span class=cl><span class=na>type</span> <span class=o>=</span> <span class=s>stcp</span>
</span></span><span class=line><span class=cl><span class=c1># 固定不变</span>
</span></span><span class=line><span class=cl><span class=na>role</span> <span class=o>=</span> <span class=s>visitor</span>
</span></span><span class=line><span class=cl><span class=c1># service_name, sk 必须严格与服务端配置完全对应</span>
</span></span><span class=line><span class=cl><span class=na>service_name</span> <span class=o>=</span> <span class=s>user_projector</span>
</span></span><span class=line><span class=cl><span class=na>sk</span> <span class=o>=</span> <span class=s>一个密码</span>
</span></span><span class=line><span class=cl><span class=c1># 本机监听地址。可改为 0.0.0.0 以允许本机和所在局域网内其它设备访问</span>
</span></span><span class=line><span class=cl><span class=na>bind_addr</span> <span class=o>=</span> <span class=s>127.0.0.1</span>
</span></span><span class=line><span class=cl><span class=c1># 本机监听端口。可自定，要求不同服务的本机监听端口不能重复</span>
</span></span><span class=line><span class=cl><span class=na>bind_port</span> <span class=o>=</span> <span class=s>8083</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>[service2]</span>
</span></span><span class=line><span class=cl><span class=na>type</span> <span class=o>=</span> <span class=s>stcp</span>
</span></span><span class=line><span class=cl><span class=na>role</span> <span class=o>=</span> <span class=s>visitor</span>
</span></span><span class=line><span class=cl><span class=na>server_name</span> <span class=o>=</span> <span class=s>user_ssh</span>
</span></span><span class=line><span class=cl><span class=na>sk</span> <span class=o>=</span> <span class=s>另一个密码</span>
</span></span><span class=line><span class=cl><span class=na>bind_addr</span> <span class=o>=</span> <span class=s>127.0.0.1</span>
</span></span><span class=line><span class=cl><span class=na>bind_port</span> <span class=o>=</span> <span class=s>8084</span>
</span></span></code></pre></td></tr></table></div></div></div></div></div><p><img class=lazyload src=/svg/loading.min.svg data-src=https://raw.githubusercontent.com/xuchunqiu/personal-blog-resources/main/docs/PSC-HC2S/remote-access-with-frp/%E7%A4%BA%E4%BE%8B-%E6%88%90%E5%8A%9F%E8%AE%BF%E9%97%AE%E4%B8%A4%E4%B8%AA%E8%BF%9C%E7%AB%AF%E9%A1%B5%E9%9D%A2.png data-srcset="https://raw.githubusercontent.com/xuchunqiu/personal-blog-resources/main/docs/PSC-HC2S/remote-access-with-frp/%E7%A4%BA%E4%BE%8B-%E6%88%90%E5%8A%9F%E8%AE%BF%E9%97%AE%E4%B8%A4%E4%B8%AA%E8%BF%9C%E7%AB%AF%E9%A1%B5%E9%9D%A2.png, https://raw.githubusercontent.com/xuchunqiu/personal-blog-resources/main/docs/PSC-HC2S/remote-access-with-frp/%E7%A4%BA%E4%BE%8B-%E6%88%90%E5%8A%9F%E8%AE%BF%E9%97%AE%E4%B8%A4%E4%B8%AA%E8%BF%9C%E7%AB%AF%E9%A1%B5%E9%9D%A2.png 1.5x, https://raw.githubusercontent.com/xuchunqiu/personal-blog-resources/main/docs/PSC-HC2S/remote-access-with-frp/%E7%A4%BA%E4%BE%8B-%E6%88%90%E5%8A%9F%E8%AE%BF%E9%97%AE%E4%B8%A4%E4%B8%AA%E8%BF%9C%E7%AB%AF%E9%A1%B5%E9%9D%A2.png 2x" data-sizes=auto alt=https://raw.githubusercontent.com/xuchunqiu/personal-blog-resources/main/docs/PSC-HC2S/remote-access-with-frp/%E7%A4%BA%E4%BE%8B-%E6%88%90%E5%8A%9F%E8%AE%BF%E9%97%AE%E4%B8%A4%E4%B8%AA%E8%BF%9C%E7%AB%AF%E9%A1%B5%E9%9D%A2.png title=成功地访问了两个远程服务></p><h1 id=根据-frpc-日志故障排除>根据 frpc 日志故障排除</h1><p>注意必须先在终端中启动 frpc，才能通过浏览器（或其它软件）访问到 frpc 提供的远程页面。启动 frpc 的终端会输出日志。下图展示了如何根据日志信息分析可能的问题。其中3、4是要访问对应服务才能看出的错误。</p><p><img class=lazyload src=/svg/loading.min.svg data-src=https://raw.githubusercontent.com/xuchunqiu/personal-blog-resources/main/docs/PSC-HC2S/remote-access-with-frp/%E6%A0%B9%E6%8D%AE%E6%97%A5%E5%BF%97%E8%BF%9B%E8%A1%8C%E6%95%85%E9%9A%9C%E6%8E%92%E9%99%A4.png data-srcset="https://raw.githubusercontent.com/xuchunqiu/personal-blog-resources/main/docs/PSC-HC2S/remote-access-with-frp/%E6%A0%B9%E6%8D%AE%E6%97%A5%E5%BF%97%E8%BF%9B%E8%A1%8C%E6%95%85%E9%9A%9C%E6%8E%92%E9%99%A4.png, https://raw.githubusercontent.com/xuchunqiu/personal-blog-resources/main/docs/PSC-HC2S/remote-access-with-frp/%E6%A0%B9%E6%8D%AE%E6%97%A5%E5%BF%97%E8%BF%9B%E8%A1%8C%E6%95%85%E9%9A%9C%E6%8E%92%E9%99%A4.png 1.5x, https://raw.githubusercontent.com/xuchunqiu/personal-blog-resources/main/docs/PSC-HC2S/remote-access-with-frp/%E6%A0%B9%E6%8D%AE%E6%97%A5%E5%BF%97%E8%BF%9B%E8%A1%8C%E6%95%85%E9%9A%9C%E6%8E%92%E9%99%A4.png 2x" data-sizes=auto alt=https://raw.githubusercontent.com/xuchunqiu/personal-blog-resources/main/docs/PSC-HC2S/remote-access-with-frp/%E6%A0%B9%E6%8D%AE%E6%97%A5%E5%BF%97%E8%BF%9B%E8%A1%8C%E6%95%85%E9%9A%9C%E6%8E%92%E9%99%A4.png title=根据日志信息判断可能的问题></p></div><div id=comments></div></div></div></main><footer class=footer><div class=footer-container><div class=footer-line>Powered by <a href=https://gohugo.io/ target=_blank rel="noopener noreffer" title="Hugo 0.95.0">Hugo</a> | Theme - <a href=https://github.com/dillonzq/LoveIt target=_blank rel="noopener noreffer" title="LoveIt 0.2.10"><i class="far fa-kiss-wink-heart fa-fw"></i> LoveIt</a></div><div class=footer-line><i class="far fa-copyright fa-fw"></i><span itemprop=copyrightYear>2019 - 2022</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=/ target=_blank>xuchunqiu</a></span>&nbsp;|&nbsp;<span class=license><a rel="license external nofollow noopener noreffer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title="Back to Top"><i class="fas fa-arrow-up fa-fw"></i>
</a><a href=# id=view-comments class=fixed-button title="View Comments"><i class="fas fa-comment fa-fw"></i></a></div><link rel=stylesheet href=/lib/katex/katex.min.css><link rel=stylesheet href=/lib/katex/copy-tex.min.css><link rel=stylesheet href=/lib/cookieconsent/cookieconsent.min.css><script type=text/javascript src=/lib/smooth-scroll/smooth-scroll.min.js></script><script type=text/javascript src=/lib/autocomplete/autocomplete.min.js></script><script type=text/javascript src=/lib/lunr/lunr.min.js></script><script type=text/javascript src=/lib/lazysizes/lazysizes.min.js></script><script type=text/javascript src=/lib/clipboard/clipboard.min.js></script><script type=text/javascript src=/lib/sharer/sharer.min.js></script><script type=text/javascript src=/lib/katex/katex.min.js></script><script type=text/javascript src=/lib/katex/auto-render.min.js></script><script type=text/javascript src=/lib/katex/copy-tex.min.js></script><script type=text/javascript src=/lib/katex/mhchem.min.js></script><script type=text/javascript src=/lib/cookieconsent/cookieconsent.min.js></script><script type=text/javascript>window.config={code:{copyTitle:"Copy to clipboard",maxShownLines:10},comment:{},cookieconsent:{content:{dismiss:"Got it!",link:"Learn more",message:"This website uses Cookies to improve your experience."},enable:!0,palette:{button:{background:"#f0f0f0"},popup:{background:"#1aa3ff"}},theme:"edgeless"},math:{delimiters:[{display:!0,left:"$$",right:"$$"},{display:!0,left:"\\[",right:"\\]"},{display:!0,left:"$$",right:"$$"},{display:!1,left:"$",right:"$"},{display:!1,left:"\\(",right:"\\)"},{display:!1,left:"$",right:"$"}],strict:!1},search:{highlightTag:"em",lunrIndexURL:"/index.json",maxResultLength:10,noResultsFound:"No results found",snippetLength:50,type:"lunr"}}</script><script type=text/javascript src=/js/theme.min.js></script><script type=text/javascript>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-6VB32GX1DH",{anonymize_ip:!0})</script><script type=text/javascript src="https://www.googletagmanager.com/gtag/js?id=G-6VB32GX1DH" async></script></body></html>